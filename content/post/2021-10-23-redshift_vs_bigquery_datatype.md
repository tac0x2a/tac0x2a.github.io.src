---
title: 'Redshift と BigQuery を雑に比較(データ型)'
date: 2021-10-23T18:34:14+09:00
draft: false
summary: 'Redshift と BigQuery のデータ型を雑に比較した'
categories: ['redshift', 'bigquery', 'memo']
---

2021-10-23 時点の以下ドキュメントに従って比較したものです

- Redshift
  https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c_Supported_data_types.html

- BigQuery
  https://cloud.google.com/bigquery/docs/reference/standard-sql/data-types

## 数値

| 型(Redshift)                     | 仕様(Redshift)                                                                                                      | 型(BigQuery)                                             | 仕様(BigQuery)                                                                                                                                                |
| -------------------------------- | ------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| SMALLINT (INT2)                  | 符号付き 2 バイト整数                                                                                               |                                                          |                                                                                                                                                               |
| INTEGER (INT、INT4)              | 符号付き 4 バイト整数                                                                                               |                                                          |                                                                                                                                                               |
| BIGINT (INT8)                    | 符号付き 8 バイト整数                                                                                               | INT64 (INT, SMALLINT, INTEGER, BIGINT, TINYINT, BYTEINT) | 整数型は全部これ。<br/>-9,223,372,036,854,775,808 ～ 9,223,372,036,854,775,807                                                                                |
|                                  |                                                                                                                     | NUMERIC (DECIMAL)                                        | 少数型<br/>デフォルトで最大精度で、NUMERIC(P[,S]) で指定することもできるが、ストレージ サイズには影響しない<br/>精度: 38, スケール: 9                         |
| DECIMAL (NUMERIC)                | <br/>decimal(precision, scale) と精度とスケールを指定。<br/>最大精度(precision)は 38, 最大スケール(scale)は 37<br/> | BIGNUMERIC (BIGDECIMAL)                                  | 少数型<br/>デフォルトで最大精度で、BIGNUMERIC(P[,S]) で指定することもできるが、ストレージ サイズには影響しない<br/>精度: 76.76（77 桁目は一部）, スケール: 38 |
| REAL (FLOAT4)                    | 単精度浮動小数点数                                                                                                  |                                                          |                                                                                                                                                               |
| DOUBLE PRECISION (FLOAT8、FLOAT) | 倍精度浮動小数点数                                                                                                  | FLOAT64                                                  | 倍精度（近似）数値。浮動小数点型なので誤差が出る。                                                                                                            |

## 日時, 時刻, タイムスタンプ

| 型(Redshift)                            | 仕様(Redshift)                                                                                                                                                                | 型(BigQuery) | 仕様(BigQuery)                                                                                                                                                                                                                                                                           |
| --------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| DATE                                    | カレンダー日付 (年、月、日)<br/>4713 BC ～ 294276 AD<br/>タイムゾーンなし(どのタイムゾーンの日付か分からない)                                                                 | DATE         | 日付型<br/>0001-01-01 ～ 9999-12-31<br/>タイムゾーンなし                                                                                                                                                                                                                                 |
| TIME (TIME WITHOUT TIME ZONE)           | 時刻 <br/>00:00:00 ～ 24:00:00<br/>マイクロ秒の精度<br/>タイムゾーンなし(どのタイムゾーンの時刻か分からない)                                                                  | TIME         | 時刻型<br/>00:00:00 ～ 23:59:59.99999<br/>マイクロ秒の精度<br/>タイムゾーンなし                                                                                                                                                                                                          |
| TIMESTAMP (TIMESTAMP WITHOUT TIME ZONE) | 日付と時刻<br/>4713 BC ～ 294276 AD<br/>マイクロ秒の精度<br/>タイムゾーンなし(どのタイムゾーンの日時か分からない)                                                             | DATETIME     | 日時型<br/>0001-01-01 00:00:00 ～ 9999-12-31 23:59:59.999999<br/>マイクロ秒の精度<br/>タイムゾーンなし                                                                                                                                                                                   |
| TIMETZ (TIME WITH TIME ZONE)            | 時刻 (タイムゾーンあり)<br/>00:00:00 + 1459 ～ 00:00:00 + 1459<br/>マイクロ秒精度<br/>タイムゾーンはデフォルト UTC                                                            |              |                                                                                                                                                                                                                                                                                          |
| TIMESTAMPTZ (TIMESTAMP WITH TIME ZONE)  | 日付と時刻 (タイムゾーンあり)<br/>4713 BC ～ 294276 AD<br/>マイクロ秒精度<br/>入力値にタイムゾーンが含まれる場合、タイムゾーンを使用して値を UTC に変換し、UTC 値を保存する。 | TIMESTAMP    | タイムスタンプ型 (タイムゾーンあり)<br/>0001-01-01 00:00:00 ～ 9999-12-31 23:59:59.999999 UTC<br/>タイムゾーンや夏時間などの慣習に関係なく、マイクロ秒精度の絶対的な時刻を表します。<br/>入力値にタイムゾーンが含まれる場合、タイムゾーンを使用して値を UTC に変換し、UTC 値を保存する。 |
|                                         |                                                                                                                                                                               | INTERVAL     | 間隔型<br/>-10000-0 -3660000 -87840000:0:0 ～ 10000-0 3660000 87840000:0:0<br/> 3 つの独立した部分から構成される期間。<br/>[sign]Y-M: 年と月<br/>[sign]D: 日<br/>[sign]H:M:S.F: 時間、分、秒、サブ秒                                                                                     |

## 文字列、その他

| 型(Redshift) | 仕様(Redshift)                                                                                                                   | 型(BigQuery) | 仕様(BigQuery)                                                                                                                                                                  |
| ------------ | -------------------------------------------------------------------------------------------------------------------------------- | ------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| BOOLEAN      | true/false (BOOL)                                                                                                                | BOOL         | NULL/TRUE/FALSE                                                                                                                                                                 |
|              |                                                                                                                                  | BYTES        | 可変長文字バイナリデータ。<br/>STRING とは別の型で、キャストすると UTF8 として解釈される。<br/>STRING 操作する関数使えるけど、こっちは生 BYTE 操作(LENGTH ならバイト数)になる。 |
| CHAR         | 固定長のキャラクタ文字列 <br/>(CHARACTER、NCHAR、BPCHAR)                                                                         |              |                                                                                                                                                                                 |
| VARCHAR      | ユーザーによって定義された制限を持つ可変長キャラクタ文字列 <br/>(CHARACTER VARYING、NVARCHAR、TEXT)<br/>文字数ではなくバイト数！ | STRING       | 可変長文字（UTF8）データ。入力 STRING 値は UTF-8 エンコードに変換する必要がある。<br/>L は最大文字数。SUBSTR や LENGTH のような関数は、バイトではなく文字数。                   |
| SUPER        | ARRAY や STRUCTS などの複合型が含まれる Amazon Redshift のすべてのスカラー型を包含するスーパーセットデータ型。                   |         |  |
|         |                    | ARRAY        | ARRAY 型ではない値のゼロ以上の要素の順序付きリスト                                                                                                                              |
|              |                                                                                                                                  | STRUCT       | 順序付きフィールドのコンテナ。各フィールドはデータ型（必須）とフィールド名（オプション）を持ちます。                                                                            |
| GEOMETRY     | 空間データ                                                                                                                       | GEOGRAPHY    | ポイントセットまたは地球表面のサブセットとして表されるポイント、ライン、およびポリゴンのコレクション。                                                                          |
| HLLSKETCH    | HyperLogLog スケッチで使用するタイプ。                                                                                           |
